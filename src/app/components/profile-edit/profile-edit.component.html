<!-- profile-edit -->
<div class="container mt-4">
    <div class="row justify-content-center">
      <div class="col-lg-8">
        <!-- Header -->
        <div class="d-flex justify-content-between align-items-center mb-4">
          <div>
            <h1 class="display-5 fw-bold text-primary">
              <i class="bi bi-person-gear me-2"></i>Modifier le Profil
            </h1>
            <p class="lead mb-0">Mettez à jour vos informations personnelles</p>
          </div>
          <button class="btn btn-outline-secondary" (click)="onCancel()">
            <i class="bi bi-arrow-left me-2"></i>Retour
          </button>
        </div>
  
        <!-- Profile Card -->
        <div class="card shadow">
          <div class="card-body p-4">
            <!-- Profile Header with Avatar -->
            <div class="text-center mb-4">
              <div class="avatar-profile mx-auto mb-3" 
                   [style.background-color]="getAvatarColor()">
                {{ getAvatarInitials() }}
              </div>
              <h3 class="card-title">Modification du profil</h3>
              <p class="text-muted">Mettez à jour vos informations ci-dessous</p>
            </div>
  
            <!-- Success Message -->
            <div *ngIf="successMessage" class="alert alert-success">
              <i class="bi bi-check-circle me-2"></i>{{ successMessage }}
            </div>
  
            <!-- Error Message -->
            <div *ngIf="errorMessage" class="alert alert-danger">
              <i class="bi bi-exclamation-triangle me-2"></i>{{ errorMessage }}
            </div>
  
            <!-- Profile Form -->
            <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
              <div class="row">
                <!-- Prénom -->
                <div class="col-md-6 mb-3">
                  <label for="prenom" class="form-label">Prénom <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="prenom" formControlName="prenom"
                         [class.is-invalid]="isFieldInvalid('prenom')"
                         placeholder="Votre prénom">
                  <div class="invalid-feedback" *ngIf="isFieldInvalid('prenom')">
                    {{ getFieldError('prenom') }}
                  </div>
                </div>
  
                <!-- Nom -->
                <div class="col-md-6 mb-3">
                  <label for="nom" class="form-label">Nom <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="nom" formControlName="nom"
                         [class.is-invalid]="isFieldInvalid('nom')"
                         placeholder="Votre nom">
                  <div class="invalid-feedback" *ngIf="isFieldInvalid('nom')">
                    {{ getFieldError('nom') }}
                  </div>
                </div>
              </div>
  
              <!-- Email -->
              <div class="mb-4">
                <label for="email" class="form-label">Email <span class="text-danger">*</span></label>
                <input type="email" class="form-control" id="email" formControlName="email"
                       [class.is-invalid]="isFieldInvalid('email')"
                       placeholder="votre@email.com">
                <div class="invalid-feedback" *ngIf="isFieldInvalid('email')">
                  {{ getFieldError('email') }}
                </div>
              </div>
  
              <!-- Form Actions -->
              <div class="d-flex gap-2 justify-content-end pt-3 border-top">
                <button type="button" class="btn btn-outline-secondary" (click)="onCancel()">
                  Annuler
                </button>
                <button type="submit" class="btn btn-primary" 
                        [disabled]="profileForm.invalid || isLoading">
                  <span *ngIf="isLoading" class="spinner-border spinner-border-sm me-2"></span>
                  {{ isLoading ? 'Mise à jour...' : 'Mettre à jour' }}
                </button>
              </div>
            </form>
  
            <!-- Form Help Text -->
            <div class="mt-4">
              <div class="alert alert-info">
                <h6 class="alert-heading">
                  <i class="bi bi-info-circle me-2"></i>Informations
                </h6>
                <p class="mb-0 small">
                  La mise à jour de votre email nécessitera une nouvelle vérification lors de votre prochaine connexion.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>